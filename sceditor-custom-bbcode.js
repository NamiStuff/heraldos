$.sceditor.plugins.bbcode.bbcode.set('s',{tags:{},style:{},format:'',html:''}).set('strike',{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[strike]{0}[/strike]",html:'<s>{0}</s>'});$.sceditor.plugins.bbcode.bbcode.set('ul',{tags:{ul:null},breakStart:true,isInline:false,format:"[list]{0}[/list]",html:'<ul>{0}</ul>'}).set('list',{breakStart:false,isInline:false,skipLastLineBreak:false,html:function(token,attrs,content){if(typeof attrs.defaultattr==='undefined'){return'<ul>'+content+'</ul>'}else if(/[1aAiI]/.test(attrs.defaultattr)){return'<ol type="'+attrs.defaultattr+'">'+content+'</ol>'}}}).set('ol',{tags:{ol:null},breakStart:true,isInline:false,skipLastLineBreak:false,format:function(elem,content){var attr=1;try{var attr=elem.context.attributes[0].value}catch(e){var attr=1}return'[list='+attr+']'+content+'[/list]'},html:'<ol>{0}</ol>'}).set('li',{tags:{li:null},skipLastLineBreak:false,isInline:false,isSelfClosing:true,closedBy:['/ul','/ol','/list','*','li'],format:"[*]{0}",html:'<li>{0}</li>'}).set('*',{skipLastLineBreak:false,excludeClosing:true,closedBy:['/ul','/ol','/list','*','li'],html:'<li>{0}</li>'});$.sceditor.plugins.bbcode.bbcode.set('table',{tags:{table:null},isInline:false,isHtmlInline:true,skipLastLineBreak:true,quoteType:$.sceditor.BBCodeParser.QuoteType.always,format:function(element,content){var validAttributes=new Array('id','class','style','align','bgcolor','border','cellpadding','cellspacing','frame','rules','summary','width');var attributes='';for(var i=0;i<validAttributes.length;i++){if(typeof(element.attr(validAttributes[i]))!=="undefined"){if(validAttributes[i]==='style'){console.info(element.attr(validAttributes[i]))}attributes+=' '+validAttributes[i]+'="'+element.attr(validAttributes[i])+'"'}}return attributes?"[table"+attributes+"]"+content+"[/table]":"[table]"+content+"[/table]"},html:function(token,attrs,content){var attributes='';for(var k in attrs){if(attrs.hasOwnProperty(k)){attributes+=' '+k+'="'+attrs[k]+'"'}}return attributes?'<table'+attributes+'>'+content+'</table>':'<table>'+content+'</table>'}}).set('tr',{tags:{tr:null},isInline:false,skipLastLineBreak:true,quoteType:$.sceditor.BBCodeParser.QuoteType.always,format:function(element,content){var validAttributes=new Array('id','class','style','align','bgcolor','char','charoff','valign');var attributes='';for(var i=0;i<validAttributes.length;i++){if(typeof(element.attr(validAttributes[i]))!=="undefined"){attributes+=' '+validAttributes[i]+'="'+element.attr(validAttributes[i])+'"'}}return attributes?"[tr"+attributes+"]"+content+"[/tr]":"[tr]"+content+"[/tr]"},html:function(token,attrs,content){var attributes='';for(var k in attrs){if(attrs.hasOwnProperty(k)){attributes+=' '+k+'="'+attrs[k]+'"'}}return attributes?'<tr'+attributes+'>'+content+'</tr>':'<tr>'+content+'</tr>'}}).set('th',{tags:{th:null},allowsEmpty:true,isInline:false,quoteType:$.sceditor.BBCodeParser.QuoteType.always,format:"[th]{0}[/th]",html:'<th>{0}</th>'}).set('td',{tags:{td:null},allowsEmpty:true,isInline:false,quoteType:$.sceditor.BBCodeParser.QuoteType.always,format:function(element,content){var validAttributes=new Array('id','class','style','abbr','align','axis','bgcolor','char','charoff','colspan','headers','height','nowrap','rowspan','scope','valign','width');var attributes='';for(var i=0;i<validAttributes.length;i++){if(typeof(element.attr(validAttributes[i]))!=="undefined"){attributes+=' '+validAttributes[i]+'="'+element.attr(validAttributes[i])+'"'}}return attributes?"[td"+attributes+"]"+content+"[/td]":"[td]"+content+"[/td]"},html:function(token,attrs,content){var attributes='';for(var k in attrs){if(attrs.hasOwnProperty(k)){attributes+=' '+k+'="'+attrs[k]+'"'}}return attributes?'<td'+attributes+'>'+content+'</td>':'<td>'+content+'</td>'}});$.sceditor.plugins.bbcode.bbcode.set('img',{allowsEmpty:true,tags:{img:{src:null}},quoteType:$.sceditor.BBCodeParser.QuoteType.never,format:function($element,content){var w,h,attribs='',element=$element[0],style=function(name){return element.style?element.style[name]:null};if(typeof $element.attr('data-sceditor-emoticon')!=="undefined")return content;w=$element.attr('width')||style('width');h=$element.attr('height')||style('height');if((element.complete&&(w||h))||(w&&h))attribs="("+$(element).width()+"px,"+$(element).height()+"px)";return'[img'+attribs+']'+$element.attr('src')+'[/img]'},html:function(token,attrs,content){var parts,attribs='';if(typeof attrs.width!=="undefined")attribs+=' width="'+attrs.width+'"';if(typeof attrs.height!=="undefined")attribs+=' height="'+attrs.height+'"';if(typeof attrs.defaultattr!=="undefined"){parts=attrs.defaultattr.split(/,/i);attribs=' width="'+parts[0].substr(1)+'"'+' height="'+(parts.length===2?parts[1].substr(0,parts[1].length-1):parts[0].substr(1))+'"'}return'<img'+attribs+' src="'+content+'" />'}});$.sceditor.plugins.bbcode.bbcode.set('flash',{allowsEmpty:true,tags:{flash:{src:null},embed:{src:null}},quoteType:$.sceditor.BBCodeParser.QuoteType.never,format:function($element,content){var w,h,attribs='',element=$element[0],style=function(name){return element.style?element.style[name]:null};w=$element.attr('width')||style('width');h=$element.attr('height')||style('height');if((element.complete&&(w||h))||(w&&h))attribs="("+$(element).width()+","+$(element).height()+")";return'[flash'+attribs+']'+$element.attr('src')+'[/flash]'},html:function(token,attrs,content){var parts,attribs='';if(typeof attrs.width!=="undefined")attribs+=' width="'+attrs.width+'"';if(typeof attrs.height!=="undefined")attribs+=' height="'+attrs.height+'"';if(typeof attrs.defaultattr!=="undefined"){parts=attrs.defaultattr.split(/,/i);attribs=' width="'+parts[0].substr(1)+'"'+' height="'+(parts.length===2?parts[1].substr(0,parts[1].length-1):parts[0].substr(1))+'"'}return'<embed pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+content+'" '+attribs+' type="application/x-shockwave-flash" wmode="transparent" quality="high" scale="exactfit"></embed>'}});$.sceditor.plugins.bbcode.bbcode.set('url',{allowsEmpty:true,tags:{a:{href:null}},quoteType:$.sceditor.BBCodeParser.QuoteType.never,format:function(element,content){var url=element.attr('href');if(url.substr(0,7)==='mailto:')return'[email="'+url.substr(7)+'"]'+content+'[/email]';if($(element).hasClass('link_embed')){return'[embed]'+url+'[/embed]'}return'[url='+FA_SCEditor.functions.FAdecodeURI(url)+']'+content+'[/url]'},html:function(token,attrs,content){if(typeof attrs.defaultattr==="undefined"||attrs.defaultattr.length===0)attrs.defaultattr=content;return'<a href="'+encodeURI(attrs.defaultattr)+'">'+content+'</a>'}});$.sceditor.plugins.bbcode.bbcode.set('embed',{tags:{a:{class:'link_embed'}},format:function(element,content){return'[embed]'+element.attr('href')+'[/embed]'},html:function(token,attrs,content){return'<a class="link_embed" href="'+content+'">'+content+'</a>'}});$.sceditor.plugins.bbcode.bbcode.set('quote',{tags:{blockquote:null},isInline:false,quoteType:$.sceditor.BBCodeParser.QuoteType.always,format:function(element,content){var author='',$elm=$(element),$cite=$elm.children("cite").first();if(($cite&&$cite.text())||$elm.data("author")){author=$cite.text()||$elm.data("author");$elm.data("author",author);$cite.remove();$elm.children("cite").replaceWith(function(){return $(this).text()});content=this.elementToBbcode($(element));author='='+author}return'[quote'+author+']'+content+'[/quote]'},html:function(token,attrs,content){if(typeof attrs.defaultattr!=="undefined"&&attrs.defaultattr!=='')content='<cite>'+attrs.defaultattr+'</cite>'+content;return'<blockquote>'+content+'</blockquote>'}});$.sceditor.plugins.bbcode.bbcode.set('dailymotion',{tags:{iframe:{'data-dailymotion-id':null}},format:function(element,content){if(!(element=element.attr('data-dailymotion-id')))return content;return'[dailymotion]'+element+'[/dailymotion]'},html:'<iframe width="560" height="315" src="http://www.dailymotion.com/embed/video/{0}?wmode=opaque" data-dailymotion-id="{0}" frameborder="0" allowfullscreen></iframe>'});$.sceditor.plugins.bbcode.bbcode.set('size',{tags:{font:{size:null}},styles:{"font-size":null},format:function(element,content){var fontSize=element.attr('size');if(!fontSize)fontSize=element.css('fontSize');if(fontSize.indexOf("px")>-1){fontSize=fontSize.replace("px","")-0}else{var sizeAssoc={1:10,2:13,3:16,4:18,5:24,6:32,7:48};fontSize=sizeAssoc[fontSize]}if(!isNaN(parseFloat(fontSize))&&isFinite(fontSize)){fontSize=Math.round(fontSize)}return'[size='+fontSize+']'+content+'[/size]'},html:function(token,attrs,content){var sizes={10:1,13:2,16:3,18:4,24:5,32:6,48:7};var fontSize=attrs.defaultattr;var size=sizes[fontSize];if(size===undefined){return'<font style="font-size: '+attrs.defaultattr+'px;">'+content+'</font>'}else{return'<font size="'+size+'" >'+content+'</font>'}}});$.sceditor.plugins.bbcode.bbcode.set('tr',{tags:{tr:null},isInline:false,skipLastLineBreak:true,quoteType:$.sceditor.BBCodeParser.QuoteType.always,format:function(element,content){var validAttributes=new Array('id','class','style','align','bgcolor','char','charoff','valign');var attributes='';for(var i=0;i<validAttributes.length;i++){if(element.attr(validAttributes[i])===''){continue}if(typeof(element.attr(validAttributes[i]))!=="undefined"){attributes+=' '+validAttributes[i]+'="'+element.attr(validAttributes[i])+'"'}}return attributes?"[tr"+attributes+"]"+content+"[/tr]":"[tr]"+content+"[/tr]"},html:function(token,attrs,content){var attributes='';for(var k in attrs){if(attrs.hasOwnProperty(k)){attributes+=' '+k+'="'+attrs[k]+'"'}}return attributes?'<tr'+attributes+'>'+content+'</tr>':'<tr>'+content+'</tr>'}});$.sceditor.plugins.bbcode.bbcode.set("h2",{tags:{h2:null},format:"[h2]{0}[/h2]",html:"<h2>{0}</h2>",isInline:false}).set("h3",{tags:{h3:null},format:"[h3]{0}[/h3]",html:"<h3>{0}</h3>",isInline:false}).set("h4",{tags:{h4:null},format:"[h4]{0}[/h4]",html:"<h4>{0}</h4>"});$.sceditor.plugins.bbcode.bbcode.set("fa", { tags: { fa: null }, format: "[fa]{0}[/fa]", html: '<fa>{0}</fa>' });
